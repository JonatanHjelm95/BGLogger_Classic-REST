(this.webpackJsonpbglogger=this.webpackJsonpbglogger||[]).push([[0],{14:function(e,t,n){e.exports=n(24)},19:function(e,t,n){},20:function(e,t,n){},24:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(8),s=n.n(o),i=(n(19),n(20),n(2)),c=n.n(i),l=n(3),u=n(4),p=n(5),f=n(6),d=n(13),v=n(12),h=n(11),m=n(10),g=new(function(){function e(){var t=this;Object(u.a)(this,e),this.startAnalyzation=function(){var e=Object(l.a)(c.a.mark((function e(n,a){var r,o,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.makeOptions("POST",{initiator:n,data:a}),e.next=3,fetch("http://161.35.221.47/BGLogger-REST/api/analyze/postlog",r);case 3:return o=e.sent,e.next=6,o.json();case 6:if(s=e.sent,o.ok){e.next=9;break}throw{status:o.status,fullError:s};case 9:return e.abrupt("return",s);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.stopAnalyzation=Object(l.a)(c.a.mark((function e(){var n,a,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.makeOptions("POST",!0),e.next=3,fetch("/api/backtest/stop",n);case 3:return a=e.sent,e.next=6,a.json();case 6:if(r=e.sent,a.ok){e.next=9;break}throw{status:a.status,fullError:r};case 9:return e.abrupt("return",r);case 10:case"end":return e.stop()}}),e)})))}return Object(p.a)(e,[{key:"makeOptions",value:function(e,t){var n={method:e,headers:{"Content-type":"application/json",Accept:"application/json"}};return t&&(n.body=JSON.stringify(t)),n}}]),e}()),y=function(e){Object(d.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={validFile:!1,processed:!1,loading:!1,encodedData:"",units:[],selectedUnit:""},a.analyze=a.analyze.bind(Object(f.a)(a)),a}return Object(p.a)(n,[{key:"validateFile",value:function(e){var t=e[0].path;console.log(e[0].path),"WoWCombatLog.txt"===t?this.setState({processed:!1,validFile:"WoWCombatLog.txt"===t}):console.log("invalid file"),this.processFile(e[0])}},{key:"processFile",value:function(){var e=Object(l.a)(c.a.mark((function e(t){var n,a=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.state.validFile&&((n=new FileReader).onload=Object(l.a)(c.a.mark((function e(){var t,r,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.result,r=m.a.encode(t),o=a.getAllUnitsFromFile(t),a.setState({encodedData:r,units:o,processed:!0}),a.createUnitSelectItems();case 5:case"end":return e.stop()}}),e)}))),n.readAsText(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAllUnitsFromFile",value:function(e){for(var t=[],n=e.split("\n"),a=1;a<n.length;a++)for(var r=n[a].split(","),o=0;o<r.length;o++)r[o].includes("Player")&&r[o+1].includes&&t.push(r[o+1]);return this.filter_list(this.removeDups(t))}},{key:"filter_list",value:function(e){return e.filter((function(e){return e.includes("-")}))}},{key:"createUnitSelectItems",value:function(){var e=this.state.units.map((function(e){return r.a.createElement("option",{key:e.replace('"',""),value:e.replace('"',"")},e.replace('"',"").replace('"',""))}));this.setState({units:e})}},{key:"removeDups",value:function(e){var t={};return e.forEach((function(e){t[e]||(t[e]=!0)})),Object.keys(t)}},{key:"analyze",value:function(){var e=Object(l.a)(c.a.mark((function e(t,n){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.startAnalyzation(t,n);case 2:a=e.sent,console.log(a);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"changeUnit",value:function(e){e.persist(),this.setState({selectedUnit:e.target.value})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(h.a,{onDrop:function(t){return e.validateFile(t)}},(function(e){var t=e.getRootProps,n=e.getInputProps;return r.a.createElement("section",null,r.a.createElement("div",t(),r.a.createElement("input",n()),r.a.createElement("p",null,"Drag 'n' drop your CombatLog.txt here, or click to browse file")))})),this.state.processed?r.a.createElement("div",null,r.a.createElement("div",{className:"unit-container"},r.a.createElement("select",{className:"unit-select",onChange:function(t){return e.changeUnit(t)}},r.a.createElement("option",{value:"",disabled:!0,selected:!0},"Select player"),this.state.units)),this.state.selectedUnit.length>0?r.a.createElement("button",{onClick:function(t){return e.analyze(e.state.selectedUnit,e.state.encodedData)}},"Analyze"):r.a.createElement("div",null)):r.a.createElement("div",null))}}]),n}(a.Component);var k=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(y,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(k,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[14,1,2]]]);
//# sourceMappingURL=main.5b4b18db.chunk.js.map