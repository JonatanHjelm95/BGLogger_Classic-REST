(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{389:function(e,t,n){e.exports=n(931)},394:function(e,t,n){},395:function(e,t,n){},437:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=437},464:function(e,t){},466:function(e,t){},489:function(e,t){},490:function(e,t){},496:function(e,t){},498:function(e,t){},508:function(e,t){},510:function(e,t){},535:function(e,t){},537:function(e,t){},538:function(e,t){},544:function(e,t){},546:function(e,t){},564:function(e,t){},567:function(e,t){},583:function(e,t){},586:function(e,t){},607:function(e,t){},931:function(e,t,n){"use strict";n.r(t);var a=n(3),r=n.n(a),c=n(383),o=n.n(c),s=(n(394),n(395),n(47)),i=n(48),l=n(65),u=n(64),f=n(66),d=n(220),p=n(24),m=n(34),h=n.n(m),v=n(77),b=n(116),k=n(388),g=n(385),E="http://161.35.221.47/bglogger",O=new(function(){function e(){var t=this;Object(s.a)(this,e),this.startAnalyzation=function(){var e=Object(v.a)(h.a.mark(function e(n,a){var r,c,o;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.makeOptions("POST",{initiator:n,data:a}),e.next=3,fetch(E+"/api/analyze/postlog",r);case 3:return c=e.sent,e.next=6,c.json();case 6:if(o=e.sent,c.ok){e.next=9;break}throw{status:c.status,fullError:o};case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),this.stopAnalyzation=Object(v.a)(h.a.mark(function e(){var n,a,r;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.makeOptions("POST",!0),e.next=3,fetch("/api/backtest/stop",n);case 3:return a=e.sent,e.next=6,a.json();case 6:if(r=e.sent,a.ok){e.next=9;break}throw{status:a.status,fullError:r};case 9:return e.abrupt("return",r);case 10:case"end":return e.stop()}},e)}))}return Object(i.a)(e,[{key:"makeOptions",value:function(e,t){var n={method:e,headers:{"Content-type":"application/json",Accept:"application/json"}};return t&&(n.body=JSON.stringify(t)),n}}]),e}()),j=n(386),y=n.n(j),w=function(e){function t(e){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).call(this,e))}return Object(f.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("tr",null,r.a.createElement("td",null,this.props.obj.msg),r.a.createElement("td",null,this.props.obj.api))}}]),t}(r.a.Component),x=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).addMessage=function(e){var t=e.sender,n=e.text;return console.log("".concat(t," sends ").concat(n))},n.addRow=function(e){var t=e.sender,a=e.text;console.log("woo");var r={msg:a,api:t};console.log("woo");n.state.stream;var c=n.state.stream;c.unshift(r),n.setState({stream:c})},n.state={stream:[{msg:"velkommen",api:"Ingen"}]},n}return Object(f.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.socket=y.a.open("http://161.35.221.47/bglogger/cettia");var t=function(t){return e.addMessage({sender:"system",text:t})};this.socket.on("message",function(t){return function(t){return e.addRow(t)}(t)}),this.socket.on("connecting",function(){return t("The socket starts a connection.")}),this.socket.on("open",function(){return t("The socket establishes a connection.")}),this.socket.on("close",function(){return t("All transports failed to connect or the connection was disconnected.")}),this.socket.on("waiting",function(e){return t("The socket will reconnect after ".concat(e," ms"))}),this.socket.once("open",function(){return setInterval(function(){return e.socket.send("message",{text:"A message - ".concat(Date.now())})},5e3)})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Dette er en liste der hele tiden modtager hvad det seneste kald til API'en er."),r.a.createElement("table",{className:"tg"},r.a.createElement("thead",null,r.a.createElement("th",null,"Besked"),r.a.createElement("th",null,"API kaldt")),this.state.stream.map(function(e){return r.a.createElement(w,{obj:e})})))}}]),t}(r.a.Component),A=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={validFile:!1,processed:!1,loading:!1,encodedData:"",units:[],selectedUnit:""},n.analyze=n.analyze.bind(Object(b.a)(Object(b.a)(n))),n}return Object(f.a)(t,e),Object(i.a)(t,[{key:"validateFile",value:function(e){var t=e[0].path;console.log(e[0].path),"WoWCombatLog.txt"===t?this.setState({processed:!1,validFile:"WoWCombatLog.txt"===t}):console.log("invalid file"),this.processFile(e[0])}},{key:"processFile",value:function(){var e=Object(v.a)(h.a.mark(function e(t){var n,a=this;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.state.validFile&&((n=new FileReader).onload=Object(v.a)(h.a.mark(function e(){var t,r,c;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=n.result,r=g.a.encode(t),c=a.getAllUnitsFromFile(t),a.setState({encodedData:r,units:c,processed:!0}),a.createUnitSelectItems();case 5:case"end":return e.stop()}},e)})),n.readAsText(t));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getAllUnitsFromFile",value:function(e){for(var t=[],n=e.split("\n"),a=1;a<n.length;a++)for(var r=n[a].split(","),c=0;c<r.length;c++)r[c].includes("Player")&&r[c+1].includes&&t.push(r[c+1]);return this.filter_list(this.removeDups(t))}},{key:"filter_list",value:function(e){return e.filter(function(e){return e.includes("-")})}},{key:"createUnitSelectItems",value:function(){var e=this.state.units.map(function(e){return r.a.createElement("option",{key:e.replace('"',""),value:e.replace('"',"")},e.replace('"',"").replace('"',""))});this.setState({units:e})}},{key:"removeDups",value:function(e){var t={};return e.forEach(function(e){t[e]||(t[e]=!0)}),Object.keys(t)}},{key:"analyze",value:function(){var e=Object(v.a)(h.a.mark(function e(t,n){var a;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.startAnalyzation(t,n);case 2:a=e.sent,console.log(a);case 4:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"changeUnit",value:function(e){e.persist(),this.setState({selectedUnit:e.target.value})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(x,null),r.a.createElement(k.a,{onDrop:function(t){return e.validateFile(t)}},function(e){var t=e.getRootProps,n=e.getInputProps;return r.a.createElement("section",null,r.a.createElement("div",t(),r.a.createElement("input",n()),r.a.createElement("p",null,"Drag 'n' drop your CombatLog.txt here, or click to browse file")))}),this.state.processed?r.a.createElement("div",null,r.a.createElement("div",{className:"unit-container"},r.a.createElement("select",{className:"unit-select",onChange:function(t){return e.changeUnit(t)}},r.a.createElement("option",{value:"",disabled:!0,selected:!0},"Select player"),this.state.units)),this.state.selectedUnit.length>0?r.a.createElement("button",{onClick:function(t){return e.analyze(e.state.selectedUnit,e.state.encodedData)}},"Analyze"):r.a.createElement("div",null)):r.a.createElement("div",null))}}]),t}(a.Component),F=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={},n}return Object(f.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(A,null))}}]),t}(r.a.Component),C=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={},n}return Object(f.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(d.a,null,r.a.createElement("div",{className:"Header"},r.a.createElement("div",{className:"header-buttons"},r.a.createElement(d.b,{className:"link",to:"/",exact:!0},r.a.createElement("span",null,"Analyze")))),r.a.createElement(p.c,null,r.a.createElement(p.a,{path:"/",exact:!0,component:F}))))}}]),t}(r.a.Component);var D=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(C,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(D,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()}).catch(function(e){console.error(e.message)})}},[[389,1,2]]]);
//# sourceMappingURL=main.51cd649d.chunk.js.map